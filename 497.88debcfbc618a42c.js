"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[497],{2497:(Q,u,r)=>{r.r(u),r.d(u,{ListPriminiModule:()=>Z});var p=r(177),d=r(4341),_=r(4007),e=r(3953),b=r(8737),R=r(9926),m=r(6701),P=r(5779),g=r(2242),f=r(8833),h=r(1141),v=r(9266),F=r(5430),C=r(563),k=r(6781),j=r(6743);const x=()=>({width:"60%"}),S=()=>({"960px":"75vw"});function $(o,l){if(1&o&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.SpI("Model: ",i.selectedPhone.modele,"")}}function T(o,l){if(1&o&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.SpI("Color: ",i.selectedPhone.couleur,"")}}function E(o,l){if(1&o&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.SpI("Description: ",i.selectedPhone.description_article,"")}}function G(o,l){if(1&o&&(e.j41(0,"div",28)(1,"div")(2,"h5",29),e.EFF(3),e.k0s(),e.j41(4,"h6",30),e.EFF(5),e.k0s(),e.j41(6,"span"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s()()()),2&o){const i=l.$implicit,n=e.XpG();e.R7$(3),e.JRh(i.shop),e.R7$(2),e.SpI("",i.prix_detail," DT"),e.R7$(),e.HbH("customer-badge status-"+n.getStatusClass(i.stocks)),e.R7$(),e.JRh(i.stocks),e.R7$(2),e.SpI("Ad title: ",i.ad_titles,"")}}function L(o,l){if(1&o){const i=e.RV6();e.j41(0,"div")(1,"div",31)(2,"p-checkbox",32),e.mxI("ngModelChange",function(t){e.eBV(i);const s=e.XpG();return e.DH7(s.valCheck,t)||(s.valCheck=t),e.Njj(t)}),e.bIt("onChange",function(){e.eBV(i);const t=e.XpG();return e.Njj(t.updateFilters())}),e.k0s(),e.j41(3,"label",33),e.EFF(4),e.k0s()()()}if(2&o){const i=l.$implicit,n=e.XpG();e.R7$(2),e.FS9("value",i),e.FS9("id",i),e.R50("ngModel",n.valCheck),e.R7$(),e.FS9("for",i),e.R7$(),e.JRh(i)}}function M(o,l){if(1&o){const i=e.RV6();e.j41(0,"div")(1,"div",31)(2,"p-checkbox",32),e.mxI("ngModelChange",function(t){e.eBV(i);const s=e.XpG();return e.DH7(s.valCheckMarque,t)||(s.valCheckMarque=t),e.Njj(t)}),e.bIt("onChange",function(){e.eBV(i);const t=e.XpG();return e.Njj(t.updateFilters())}),e.k0s(),e.j41(3,"label",33),e.EFF(4),e.k0s()()()}if(2&o){const i=l.$implicit,n=e.XpG();e.R7$(2),e.FS9("value",i),e.FS9("id",i),e.R50("ngModel",n.valCheckMarque),e.R7$(),e.FS9("for",i),e.R7$(),e.JRh(i)}}function V(o,l){if(1&o){const i=e.RV6();e.j41(0,"div")(1,"div",31)(2,"p-checkbox",32),e.mxI("ngModelChange",function(t){e.eBV(i);const s=e.XpG();return e.DH7(s.valCheckShop,t)||(s.valCheckShop=t),e.Njj(t)}),e.bIt("onChange",function(){e.eBV(i);const t=e.XpG();return e.Njj(t.updateFilters())}),e.k0s(),e.j41(3,"label",33),e.EFF(4),e.k0s()()()}if(2&o){const i=l.$implicit,n=e.XpG();e.R7$(2),e.FS9("value",i),e.FS9("id",i),e.R50("ngModel",n.valCheckShop),e.R7$(),e.FS9("for",i),e.R7$(),e.JRh(i)}}function I(o,l){if(1&o){const i=e.RV6();e.j41(0,"div")(1,"div",31)(2,"p-checkbox",32),e.mxI("ngModelChange",function(t){e.eBV(i);const s=e.XpG();return e.DH7(s.valCheckColor,t)||(s.valCheckColor=t),e.Njj(t)}),e.bIt("onChange",function(){e.eBV(i);const t=e.XpG();return e.Njj(t.updateFilters())}),e.k0s(),e.j41(3,"label",33),e.EFF(4),e.k0s()()()}if(2&o){const i=l.$implicit,n=e.XpG();e.R7$(2),e.FS9("value",i),e.FS9("id",i),e.R50("ngModel",n.valCheckColor),e.R7$(),e.FS9("for",i),e.R7$(),e.JRh(i)}}function D(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",34)(1,"p-dropdown",35),e.bIt("onChange",function(t){e.eBV(i);const s=e.XpG();return e.Njj(s.onSortChange(t))}),e.k0s(),e.j41(2,"span",36),e.nrm(3,"i",37),e.j41(4,"input",38),e.bIt("input",function(t){e.eBV(i);const s=e.XpG(),c=e.sdS(55);return e.Njj(s.onFilter(c,t))}),e.k0s()(),e.nrm(5,"p-dataViewLayoutOptions"),e.k0s()}if(2&o){const i=e.XpG();e.R7$(),e.Y8G("options",i.sortOptions)}}function B(o,l){if(1&o&&(e.j41(0,"div",27),e.EFF(1),e.k0s()),2&o){const i=e.XpG().$implicit;e.R7$(),e.SpI("Description: ",i.description_article,"")}}function N(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",40)(1,"div",4)(2,"div",41),e.bIt("click",function(){const t=e.eBV(i).$implicit,s=e.XpG(2);return e.Njj(s.selectPhone(t))}),e.j41(3,"div",4),e.nrm(4,"img",6),e.j41(5,"div",5)(6,"div",7),e.EFF(7),e.nI1(8,"uppercase"),e.k0s(),e.DNE(9,B,2,1,"div",8),e.j41(10,"div",9),e.nrm(11,"i",10),e.j41(12,"span",11),e.EFF(13),e.k0s()()()()(),e.j41(14,"div",12)(15,"span",42),e.EFF(16),e.k0s(),e.nrm(17,"p-button",13),e.j41(18,"span"),e.EFF(19),e.k0s()()()()}if(2&o){const i=l.$implicit,n=e.XpG(2);e.R7$(4),e.Y8G("src",i.ad_image,e.B4B)("alt",i.titre_article),e.R7$(3),e.JRh(e.bMT(8,9,i.titre_article)),e.R7$(2),e.Y8G("ngIf",i.description_article),e.R7$(4),e.JRh(i.marque),e.R7$(3),e.SpI("",i.max_price==i.min_price?i.max_price:i.min_price+" --\x3e "+i.max_price," DT"),e.R7$(2),e.HbH("customer-badge status-"+n.getStatusClass(i.stocks[0])),e.R7$(),e.JRh(i.stocks[0])}}function y(o,l){1&o&&e.DNE(0,N,20,11,"div",39),2&o&&e.Y8G("ngForOf",l.$implicit)}function X(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",44)(1,"div",45)(2,"div",46),e.bIt("click",function(){const t=e.eBV(i).$implicit,s=e.XpG(2);return e.Njj(s.selectPhone(t))}),e.j41(3,"div",47)(4,"div",48),e.nrm(5,"i",10),e.j41(6,"span",11),e.EFF(7),e.k0s()(),e.j41(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"div",49),e.nrm(11,"img",50),e.j41(12,"div",7),e.EFF(13),e.nI1(14,"uppercase"),e.k0s()()(),e.j41(15,"div",47)(16,"span",51),e.EFF(17),e.k0s(),e.nrm(18,"p-button",52),e.k0s()()()}if(2&o){const i=l.$implicit,n=e.XpG(2);e.R7$(7),e.JRh(i.marque),e.R7$(),e.HbH("customer-badge status-"+n.getStatusClass(i.stocks[0])),e.R7$(),e.JRh(i.stocks[0]),e.R7$(2),e.Y8G("src",i.ad_image,e.B4B)("alt",i.titre_article),e.R7$(2),e.JRh(e.bMT(14,8,i.titre_article)),e.R7$(4),e.SpI("",i.max_price==i.min_price?i.max_price:i.min_price+" --\x3e "+i.max_price," DT")}}function O(o,l){if(1&o&&(e.j41(0,"div",1),e.DNE(1,X,19,10,"div",43),e.k0s()),2&o){const i=l.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}let w=(()=>{class o{priminiPhoneService;filterService;display=!1;phones=[];selectedPhone={ad_href:"",ad_image:"",titre_article:"",description_article:"",min_price:0,max_price:0,prix_detail:[],shop:[],ad_titles:[],stocks:[],marque:"",couleur:"",modele:""};sortOptions=[];sortOrder=0;sortField="";carouselResponsiveOptions=[{breakpoint:"1024px",numVisible:3,numScroll:3},{breakpoint:"768px",numVisible:2,numScroll:2},{breakpoint:"560px",numVisible:1,numScroll:1}];currentPage=1;filters={max_ad_price:100,min_ad_price:0,ram:[],stockage:[],ad_stocks:[],couleur:[],shop:[],marque:[]};valCheckMarque=[];valCheckColor=[];valCheck=[];valCheckShop=[];sliderMin=0;sliderMax=100;sliderValues=[this.sliderMin,this.sliderMax];filteredData=[];totalRecords=0;reloadedTimes=[];constructor(i,n){this.priminiPhoneService=i,this.filterService=n}refresh(){this.priminiPhoneService.getPhones(0).subscribe(i=>{this.phones=i,console.log(i),this.filteredData=i,this.totalRecords=this.filteredData.length})}ngOnInit(){this.refresh(),this.filterService.getFiltersPrimini().subscribe(i=>{this.filters=i,this.sliderMin=this.filters.min_ad_price,this.sliderMax=this.filters.max_ad_price,this.sliderValues=[this.sliderMin,this.sliderMax]}),this.sortOptions=[{label:"Price High to Low",value:"!min_price"},{label:"Price Low to High",value:"min_price"}]}onSortChange(i){const n=i.value;0===n.indexOf("!")?(this.sortOrder=-1,this.sortField=n.substring(1,n.length)):(this.sortOrder=1,this.sortField=n)}onFilter(i,n){i.filter(n.target.value)}onPage(i){if(this.currentPage=i.first/i.rows+1,this.currentPage%20==0){console.log(`This is page ${this.currentPage}, sending message`);let n=this.currentPage/20;this.priminiPhoneService.getPhones(n).subscribe(t=>{this.reloadedTimes.some(s=>s===n)||(this.reloadedTimes.push(n),this.filteredData.push(...t),console.log(this.filteredData),this.totalRecords+=t.length)})}}selectPhone(i){console.log("Phone is equal to "),console.log(i),this.selectedPhone=i,this.display=!0}updateFilters(){this.filterService.getFilteredPriminiData({priceRange:this.sliderValues,status:this.valCheck,shop:this.valCheckShop,marque:this.valCheckMarque,color:this.valCheckColor}).subscribe(n=>{this.filteredData=n.filtered_data,this.filters=n.newfilters})}getCarouselData(){return this.selectedPhone.shop.map((i,n)=>({shop:i,prix_detail:this.selectedPhone.prix_detail[n],stocks:this.selectedPhone.stocks[n],ad_titles:this.selectedPhone.ad_titles[n]}))}getStatusClass(i){if(i){const n=i.toLowerCase();return"en stock"===n?"qualified":"info non disponible"===n?"proposal":"hors stock"===n?"unqualified":"pr\xe9commande"===n?"renewal":"new"}return"new"}openExternalLink(i){window.open(i,"_blank")}static \u0275fac=function(n){return new(n||o)(e.rXU(b.C),e.rXU(R.E))};static \u0275cmp=e.VBU({type:o,selectors:[["ng-component"]],decls:59,vars:37,consts:[["dv",""],[1,"grid"],["header","Phone Details","showEffect","fade",3,"visibleChange","visible","modal","breakpoints"],[1,"col-12"],[1,"flex","flex-column","md:flex-row","align-items-center","p-3","w-full"],[1,"flex-1","text-center","md:text-left"],[1,"my-4","md:my-0","w-9","md:w-10rem","shadow-2","mr-5",3,"src","alt"],[1,"text-2xl","font-bold"],["class","mb-3",4,"ngIf"],[1,"flex","align-items-center","mt-2"],[1,"pi","pi-tag","mr-2"],[1,"font-semibold"],[1,"flex","flex-row","md:flex-column","justify-content-between","w-full","md:w-auto","align-items-center","md:align-items-end","mt-5","md:mt-0"],["icon","pi pi-shopping-cart","label","Add to Cart",1,"mb-2"],["icon","pi pi-external-link","label","Show",1,"mb-2",3,"click"],[3,"value","numVisible","numScroll","circular","responsiveOptions"],["pTemplate","item"],[1,"col-12","lg:col-3",2,"max-height","1470px","overflow","auto","margin-bottom","20px"],[1,"card"],["pButton","","pRipple","","type","button","label","Delete all filters","icon","pi pi-times","iconPos","right",1,"p-button-danger","p-button-text","mr-2","mb-2",3,"click"],[3,"ngModelChange","onSlideEnd","ngModel","range","min","max"],[4,"ngFor","ngForOf"],[1,"col-12","xl:col-9"],["filterBy","modele","layout","grid",3,"onPage","value","paginator","rows","totalRecords","sortField","sortOrder"],["pTemplate","header"],["pTemplate","listItem"],["pTemplate","gridItem"],[1,"mb-3"],[1,"border-round","m-2","text-center","p-2",2,"border","1px solid var(--surface-d)"],[1,"mb-1"],[1,"mt-0","mb-3"],[1,"field-checkbox"],["name","group1",3,"ngModelChange","onChange","ngModel","value","id"],[3,"for"],[1,"grid","grid-nogutter","flex-column","md:flex-row","justify-content-between"],["placeholder","Sort By Price",3,"onChange","options"],[1,"p-input-icon-left","mb-2","md:mb-0"],[1,"pi","pi-search"],["type","search","pInputText","","placeholder","Search by Modele",3,"input"],["class","col-12","style","border-bottom: 1px solid #ccc;",4,"ngFor","ngForOf"],[1,"col-12",2,"border-bottom","1px solid #ccc"],[1,"flex-1","text-center","md:text-left",2,"cursor","pointer",3,"click"],[1,"text-2xl","font-semibold","mb-2","align-self-center","md:align-self-end"],["class","col-12 md:col-4",4,"ngFor","ngForOf"],[1,"col-12","md:col-4"],[1,"card","m-3","border-1","surface-border"],[2,"cursor","pointer",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"flex","align-items-center"],[1,"text-center"],[1,"w-9","shadow-2","my-3","mx-0",3,"src","alt"],[1,"text-2xl","font-semibold"],["icon","pi pi-shopping-cart"]],template:function(n,t){if(1&n){const s=e.RV6();e.j41(0,"div",1)(1,"p-dialog",2),e.mxI("visibleChange",function(a){return e.eBV(s),e.DH7(t.display,a)||(t.display=a),e.Njj(a)}),e.j41(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",4),e.nrm(6,"img",6),e.j41(7,"div",5)(8,"div",7),e.EFF(9),e.nI1(10,"uppercase"),e.k0s(),e.nrm(11,"br"),e.DNE(12,$,2,1,"div",8)(13,T,2,1,"div",8)(14,E,2,1,"div",8),e.j41(15,"div",9),e.nrm(16,"i",10),e.j41(17,"span",11),e.EFF(18),e.k0s()()()()(),e.j41(19,"div",12),e.nrm(20,"p-button",13),e.j41(21,"p-button",14),e.bIt("click",function(){return e.eBV(s),e.Njj(t.openExternalLink(t.selectedPhone.ad_href))}),e.k0s()()()(),e.j41(22,"p-carousel",15),e.DNE(23,G,10,6,"ng-template",16),e.k0s()(),e.j41(24,"div",17)(25,"div",18)(26,"h5"),e.EFF(27,"Filters"),e.k0s(),e.j41(28,"button",19),e.bIt("click",function(){return e.eBV(s),e.Njj(t.updateFilters())}),e.k0s()(),e.j41(29,"div",18)(30,"h5"),e.EFF(31,"Price Range"),e.k0s(),e.j41(32,"p-slider",20),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(t.sliderValues,a)||(t.sliderValues=a),e.Njj(a)}),e.bIt("onSlideEnd",function(){return e.eBV(s),e.Njj(t.updateFilters())}),e.k0s(),e.nrm(33,"br"),e.j41(34,"p"),e.EFF(35),e.k0s()(),e.j41(36,"div",18)(37,"h5"),e.EFF(38,"Status"),e.k0s(),e.DNE(39,L,5,5,"div",21),e.k0s(),e.j41(40,"div",18)(41,"h5"),e.EFF(42,"Brand"),e.k0s(),e.DNE(43,M,5,5,"div",21),e.k0s(),e.j41(44,"div",18)(45,"h5"),e.EFF(46,"Shop"),e.k0s(),e.DNE(47,V,5,5,"div",21),e.k0s(),e.j41(48,"div",18)(49,"h5"),e.EFF(50,"Color"),e.k0s(),e.DNE(51,I,5,5,"div",21),e.k0s()(),e.j41(52,"div",22)(53,"div",18)(54,"p-dataView",23,0),e.bIt("onPage",function(a){return e.eBV(s),e.Njj(t.onPage(a))}),e.DNE(56,D,6,1,"ng-template",24)(57,y,1,1,"ng-template",25)(58,O,2,1,"ng-template",26),e.k0s()()()()}2&n&&(e.R7$(),e.Aen(e.lJ4(35,x)),e.R50("visible",t.display),e.Y8G("modal",!0)("breakpoints",e.lJ4(36,S)),e.R7$(5),e.Y8G("src",t.selectedPhone.ad_image,e.B4B)("alt",t.selectedPhone.titre_article),e.R7$(3),e.JRh(e.bMT(10,33,t.selectedPhone.titre_article)),e.R7$(3),e.Y8G("ngIf",t.selectedPhone.modele),e.R7$(),e.Y8G("ngIf",t.selectedPhone.couleur),e.R7$(),e.Y8G("ngIf",t.selectedPhone.description_article),e.R7$(4),e.JRh(t.selectedPhone.marque),e.R7$(4),e.Y8G("value",t.getCarouselData())("numVisible",3)("numScroll",3)("circular",!1)("responsiveOptions",t.carouselResponsiveOptions),e.R7$(10),e.R50("ngModel",t.sliderValues),e.Y8G("range",!0)("min",t.sliderMin)("max",t.sliderMax),e.R7$(3),e.Lme("From ",t.sliderValues[0]," DT to ",t.sliderValues[1]," DT"),e.R7$(4),e.Y8G("ngForOf",t.filters.ad_stocks),e.R7$(4),e.Y8G("ngForOf",t.filters.marque),e.R7$(4),e.Y8G("ngForOf",t.filters.shop),e.R7$(4),e.Y8G("ngForOf",t.filters.couleur),e.R7$(3),e.Y8G("value",t.filteredData)("paginator",!0)("rows",9)("totalRecords",t.totalRecords)("sortField",t.sortField)("sortOrder",t.sortOrder))},dependencies:[p.Sq,p.bT,d.BC,d.vS,m.U$,P.Ei,m.Ks,g.S,f.ms,h._f,h.$n,v.Ap,F.Sc,C.n,k.l,j.F,p.Pc],encapsulation:2})}return o})(),Y=(()=>{class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=e.$C({type:o});static \u0275inj=e.G2t({imports:[_.iI.forChild([{path:"",component:w}]),_.iI]})}return o})();var J=r(6574),H=r(7899),U=r(4714),A=r(7983),K=r(4582),W=r(6394);let Z=(()=>{class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=e.$C({type:o});static \u0275inj=e.G2t({imports:[p.MD,d.YN,Y,m.KQ,J.W,H.N,g.u,f.kr,U.wZ,h.tm,v.SW,F.q4,C.Z,k.P,A.d,K.bG,j.R,W.U]})}return o})()}}]);